<!doctype html>
<html lang="en">
<head>
    <title>Questionnnaire_edit</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <!-- including ECharts file -->
    <script src="../static/js"></script>
    <!-- CSS Files  -->
    <link rel="stylesheet" href="/css/mainPageStyle.css">
    <link rel="stylesheet" href="/css/general_style.css">
    <link rel="stylesheet" href="/css/Questionnaire_css.css">
    <link rel="stylesheet" href="/css/Questionnaire_edit_css.css">
    <link rel="stylesheet" href="/css/switch_questionanaire.css">
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css"
          href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons"/>

    <!-- Material Dashboard CSS -->
    <link rel="stylesheet" href="/css/material-dashboard.css">
    <script src="/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="/js/core/popper.min.js" type="text/javascript"></script>
    <script src="/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
    <script src="/js/general_script.js" type="text/javascript"></script>
    <script src="/js/questionnaire_script.js" type="text/javascript"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="/js/autoComplete.js" type="text/javascript"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.8.1/css/bootstrap-select.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.8.1/js/bootstrap-select.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

</head>
<body>
{{>Header}}
{{#questionnaire}}
<ul class="breadcrumb">
    <li><a href="/MainPage">Home</a></li>
    <li>Formularios</li>
    <li><a href="/questionnaire">Administrar formularios</a></li>
    <li><a href="#">{{name}}</a></li>
</ul>
<div class="container-custom container container-questionnaire-edit">
    <div class="card card-4">
        <div class="card-body-custom card-body">
            <form>
                <div class="row row-center">
                    <div class="col-md-6">
                        <div class="form-group-questionnaire form-group">
                            <input type="text" id="id" value="{{id}}" hidden>
                            <label for="name">Nombre: </label>
                            <input type="text" name="question" required class="form-control" id="name" value="{{name}}"
                                   placeholder="Nombre">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group-questionnaire form-group autocomplete">
                            <label for="category">Categoría: </label>
                            <input hidden id="categories" value="{{#categories}}{{.}},{{/categories}}"></input>
                            <input type="text" name="question" required class="form-control" id="category"
                                   value="{{category}}" placeholder="Categoría" autocomplete="off">
                        </div>
                    </div>
                </div>
                <br>
                <div class="row row-center">
                    <div class="col-md-6">
                        <div class="form-group-questionnaire form-group ">
                            <label for="description">Descripcion</label>
                            <textarea class="form-control" id="description" rows="3">{{description}}</textarea>
                        </div>
                    </div>
                    <div id="custom-md6" class="col-md-6">
                        <label for="selectorQuestionnaire">Usuarios asignados</label>
                        <br>
                        <select id="selectorQuestionnaire" class="selectpicker-custom selectpicker" multiple
                                data-live-search="true">
                            <option disabled>id - usuario - nombre</option>
                            <option {{#selected}}selected{{
                            /selected}} value="all" id="all">Todos los usuarios</option>
                            {{#users}}
                            <option selected>{{id}} - {{username}} - {{name}}</option>
                            {{/users}}
                            {{#userslist}}
                            <option>{{id}} - {{username}} - {{name}}</option>
                            {{/userslist}}
                        </select>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-6">
                                <h4>Formulario con penalización por fallo:</h4>
                            </div>
                            <div class="col-md-3" style="margin-left: -6%;">
                                 <label class="switch">
                                    <input type="checkbox" {{#subtraction}}checked{{/subtraction}} id="checkBoxSwitch">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                            <div class="col-md-3"></div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="row">
                            <div class="col-md-9"><h4>Tiempo en minutos del cuestionario(0 si tiene tiempo ilimitado):</h4></div>
                            <div class="col-md-3" style="margin-left: -7%;">
                                <input id="time" type="number" class="numberInput form-control" aria-label="answer"
                                       aria-describedby="basic-addon2" min="0" value="{{time}}" style="min-width: 50%"
                                       onkeypress="return event.charCode >= 48 && event.charCode <= 57">
                            </div>
                            <div class="col-md-1"></div>
                        </div>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-12">
                        <h4>Arrastra o haz click en las preguntas que desee seleccionar para su cuestionario</h4>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-5">
                        <label for="posible">Todas las preguntas</label>
                    </div>
                    <div class="col-md-2"></div>
                    <div class="col-md-5">
                        <label for="elegidas">Preguntas elegidas</label>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-5">
                        <div class="search-list-custom active-red-3 active-red-4 mb-4">
                            <input id="list1search" class="search-list" type="text" placeholder="Search"
                                   aria-label="Search">
                        </div>
                    </div>
                    <div class="col-md-2"></div>
                    <div class="col-md-5">
                        <div class="search-list-custom active-green-3 active-green-4 mb-4">
                            <input id="list2search" class="search-list" type="text" placeholder="Search"
                                   aria-label="Search">
                        </div>
                    </div>
                </div>
                <div class="row row-center">

                    <div id="posible" class="col-md-5">
                        <ul id="sortable1" class="connectedSortable">
                            {{#questionsList}}
                            <li id="qNs-{{id}}" class="ui-state-default">{{question}}</li>
                            {{/questionsList}}
                        </ul>
                    </div>
                    <div class="arrow-col col-md-2">
                        <i class="icon-custom material-icons">send</i>
                    </div>
                    <div id="elegidas" class="col-md-5">
                        <ul id="sortable2" class="connectedSortable">
                            {{#questions}}
                            <li id="qS-{{id}}" class="ui-state-highlight">{{question}}</li>
                            {{/questions}}
                        </ul>
                    </div>

                </div>
                <br>
                <button onclick="saveQuestionnaire()" type="button" class="button-custom-login btn btn-primary">Guardar
                    cuestionario
                </button>
            </form>
        </div>
    </div>
</div>
{{/questionnaire}}
{{>Footer}}
<script>
    window.onload = function () {
        autoComplete(document.getElementById("category"), document.getElementById("categories").value);
    }
</script>

</body>
</html>